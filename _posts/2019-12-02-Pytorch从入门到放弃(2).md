---
layout:     post
title:      深度学习Pytorch从入门到放弃(2)
subtitle:   
date:       2019-12-02
author:     高庆东
header-img: img/ceshi.jpg
catalog: true
tags:
    - Pytorch
    - 深度学习
    - 神经网络
    - python
    - 源码解析
    - c++底层

---

## torch源码框架
在github的pytorch源码中，主要代码是torch文件下的代码，其中包含很多c和c++的实现其中重要的实现是通用矩阵乘gemm。  
C和C++的以后再学，先学python文件。首先学重要的最核心的
### autograd
这个包主要是对节点的倒数进行设置，首先一个节点也就是一个数据。可以成为一个计算图上的节点需要有导数的性质，  
可以求导。对数据进行变量设置，自动求导机制就是从这而来。其实这部分用的不多，已经将其中的很多特性与`torch.tesnor()`  
合并了。所以一般情况下用的不多。其中最最要的一点需要知道，Variable是tensor的一个继承类。   
```
import torch.autogard.Variable as V
data_=V(torch.rand(2,3).requires_grad=True)
```
data_具有`.data`,`grad`等属性，与tensor一致。 

### nn 
是对所有方法和类的封装，在这个文件中包含的所有常用的函数，如卷积，损失，和常用模型基础矿建类。其中包含一个parameter类型，  
该类型是对tensor的一个封装，主要作用是构建节点。简单来说就是导数可以通过这个节点或者说可求导。 其中最重要的modules包是最重要  
的包含了很多基础类和基础函数类。是构建模型的主要工具。下周前我要详细分析其中的实现过程从底层到python实现。
### optim
该文件主要是优化器，包括梯度下降等，还有具体的实现方法，这有个大问题，很多方法不支持稀疏数据的优化，贼鸡儿烦，让哪些稀疏数据怎么看。 
在这个文件中主要介绍了更新方法和实现过程， 还有梯度更新的具体过程，看了源码后我感觉这部分是整个torch项目最简单的。而且也是最好  
理解的。
### utils

这个文件最常用的主要是数据处理。其中有很多已经封装好的处理数据的方法。很实用。完全可以作为一个专门作为数据处理的框架独立出来，  
真的非常好用。在这个另类中主要是  `Dataset()`和`Dataloader`,这两个类。真他娘的写得好。还有一些关于模型的下载保存，还有画图  
等等，我没看不懂不写了。
### cuda
这个是torch的巧妙所在，只会用没看源码，具体怎么实现不知道，下周把它看了，其中的主要问题有：  
计算过程，多进程，分布式，数据计算方式。

---

在torch中会涉及到很多python的知识，糟糕只会python可咋办，如何精通python ，精通python是精通语言本身还是精通它的某些框架，费解  
记录一下我对pytorch的理解。

> pytorch是一个动态计算图，图上的任何节点都可以在计算过程中进行修改。这种理解说了和没说一样。你就想，我要构建一个模型，首先  
> 模型需要数据，需要抽象函数，需要计算过程，需要学习，这几个东西对应了pytorch中的不同模块。上面已经说过这些模块，
> 具体的过程需要构建过程中优化，在优化的时候我们需要考虑内存，考虑计算效率，考虑计算方式和设备优化。
> 同时各个模块的配合使用，例如GPU中的模型不肯能接受CPU中的数据，GUP0中的模型必须接受GPU0中的数据。
> 
